<script>
if('serviceWorker' in navigator) {
  navigator.serviceWorker
    .register('./sw-v2.js')
    .then((registration) => {
      console.log('Service Worker Registered')
      registration.update()
      console.log('Service Worker Updated')
    })
}

if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
  document.body.classList.add('dark-theme')
}

const toggleTheme = (e) => {    
  const darkModeOn = e.detail.colorScheme === 'dark';
  if(darkModeOn) {
    document.body.classList.add('dark-theme')
  } else {
    document.body.classList.remove('dark-theme')
  }
};
document.addEventListener('colorschemechange', toggleTheme);
</script>
